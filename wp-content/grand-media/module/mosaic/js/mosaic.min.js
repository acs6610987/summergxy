/** @preserve
 *  gmediaMosaic v2.4
 */
!function(t){t.gmediaMosaic||(t.gmediaMosaic={})}(window),/** @preserve
 *  JSTween JavaScript Library v1.2
 *  http://www.jstween.org/
 *
 *  Copyright 2011, Marco Wolfsheimer
 *  JSTween by Marco Wolfsheimer is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License.
 *
 *  Date: Sun Mar 13 12:46:40 2011 -0000
 */
function(t){t.gmediaMosaic||(t.gmediaMosaic={}),t.gmediaMosaic.JSTween=function(e){var i=/[\-]{0,1}[0-9\.]{1,}|#[0-9\.abcdef]{3,6}/gi,o=/[pxemtcin%]{1,2}|deg/gi,s=/[0-9\.\-]{1,}/gi,a=/[0-9a-f]{3,6}/gi,n=/^#/,r=/^[0-9\.\-]{1,}([pxemtcin%]{1,2}|deg)$/,l=/^rgb\(/,p=/^scroll/,h=/-([a-z])/gi,d=/^-ms/gi,c={opacity:["opacity","-moz-opacity","filter"],shadow:["box-shadow","-moz-box-shadow","-o-box-shadow","-ms-box-shadow","-webkit-box-shadow"],transform:["-moz-transform","transform","-o-transform","-ms-transform","-webkit-transform"],transformOrigin:["-moz-transform-origin","transform-origin","-o-transform-origin","-ms-transform-origin","-webkit-transform-origin"],borderRadius:["-moz-border-radius","border-radius","-webkit-border-radius"],borderRadiusTopLeft:["-moz-border-radius-topleft","border-top-left-radius","-webkit-border-top-left-radius"],borderRadiusTopRight:["-moz-border-radius-topright","border-top-right-radius","-webkit-border-top-right-radius"],borderRadiusBottomLeft:["-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-bottom-left-radius"],borderRadiusBottomRight:["-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-right-radius"],backgroundSize:["background-size","-moz-background-size","-o-background-size","-webkit-background-size"]},u={},m=[],g=0,f=0,_=!1,v=!1,$=0,y={},w=/iPad/i.test(navigator.userAgent)||/iPhone OS/i.test(navigator.userAgent),b=function(){var t=jQuery.fn;jQuery.JSTween=e,t.tween=function(t){var e,i=this.length;for(e=0;i>e;e++)S(this[e],t);return this},jQuery.framerate=function(t){x(t)},jQuery.play=function(t){z(t)},jQuery.clear=function(t,e){T(t,e)},t.play=function(t){return z(t),this},t.clear=function(t){var e,i=this.length;for(e=0;i>e;e++)T(this[e],t);return this},t.property=function(t){var e,i=[],o=this.length;for(e=0;o>e;e++)i.push(M(this[e],t));return 1===i.length?i[0]:i},t.opacity=function(t){var e,i=this.length;for(e=0;i>e;e++)G(this[e],t);return this},t.alpha=t.opacity,t.transparency=t.opacity,t.rotate=function(t){var e,i=this.length;for(e=0;i>e;e++)W(this[e],t);return this},t.action=function(t,e,i,a){var n,l,p=this.length,h={};if("object"==typeof t){for(n in t)t.hasOwnProperty(n)&&"string"==typeof t[n]&&(r.test(t[n])?h[n]={value:parseFloat(t[n].match(s)[0],10),units:t[n].match(o)[0]}:h[n]={value:t[n],units:void 0});for(l=0;p>l;l++)for(n in t=jQuery.JSTween.register(this[l]),h)h.hasOwnProperty(n)&&jQuery.JSTween.action(t,n,h[n].value,h[n].units,void 0,!0)}else for(l=0;p>l;l++)O(N(this[l]),t,e,i,a,!0);return this},t.state=function(t){if(0<this.length&&void 0!==this[0].__animate){if(void 0!==t&&void 0!==this[0].__animate.state[t])return this[0].__animate.state[t];if(void 0===t)return this[0].__animate.state}},t.transform=function(t){var e,i=this.length;for(e=0;i>e;e++)E(this[e],t);return this},t.transformOrigin=function(t){var e,i=this.length;for(e=0;i>e;e++)q(this[e],t);return this},t.backgroundSize=function(t){var e,i=this.length;for(e=0;i>e;e++)H(this[e],t);return this},t.shadow=function(t){var e,i=this.length;for(e=0;i>e;e++)D(this[e],t);return this},t.borderRadius=function(t,e){var i,o=this.length;for(i=0;o>i;i++)F(this[i],t,e);return this},t.borderRadiusTopRight=function(t,e){var i,o=this.length;for(i=0;o>i;i++)B(this[i],"top","right",t,e);return this},t.borderRadiusTopLeft=function(t,e){var i,o=this.length;for(i=0;o>i;i++)B(this[i],"top","left",t,e);return this},t.borderRadiusBottomRight=function(t,e){var i,o=this.length;for(i=0;o>i;i++)B(this[i],"bottom","right",t,e);return this},t.borderRadiusBottomLeft=function(t,e){var i,o=this.length;for(i=0;o>i;i++)B(this[i],"bottom","left",t,e);return this},t.borderRadiusCorner=function(t,e,i,o){var s,a=this.length;for(s=0;a>s;s++)B(this[s],t,e,i,o);return this}},k=function(t,e){return e.toUpperCase()},x=function(t){return t?(y.frameRate=t||45,y.frameDelay=Math.round(1e3/y.frameRate),y.frameLength=1/y.frameRate,y.frameRate):y.frameRate},M=function(t,e){return void 0!==t.__animate?void 0===e?t.__animate.state:t.__animate.state[e]?t.__animate.state[e]:!1:!1},I=function(t){return void 0!==t.tagName||void 0===t.scroll&&void 0===t.scrollTo?t.scrollLeft+"px "+t.scrollTop+"px":jQuery(t).scrollLeft()+"px "+jQuery(t).scrollTop()+"px"},P=function(t,e){return"function"==typeof t?t():void 0!==t?t:e},j=function(t){var e=t.match(i);t=t.split(i);var o,r=e.length;for(o=0;r>o;o++)if(n.test(e[o])){var l,p=o;l=e[o].match(a)[0],l=3===l.length?[16*parseInt(l.substr(0,1),16),16*parseInt(l.substr(1,1),16),16*parseInt(l.substr(2,1),16)]:[parseInt(l.substr(0,2),16),parseInt(l.substr(2,2),16),parseInt(l.substr(4,2),16)],e[p]=l}else e[o]=parseFloat(e[o].match(s)[0],10);return{value:e,delimiter:t}},S=function(e,i){var a,n,r=N(e),h=0,d=0,c={};for(a in i)if(i.hasOwnProperty(a)&&"onStart"!==a&&"onStop"!==a&&"onFrame"!==a){if(c[a]={},void 0===i[a].start){var h=e,d=a,u=i[a].stop,m=M(h,d),_=void 0,v=void 0;if(n=void 0,!1===m||p.test(d)){switch(d){case"transform":case"transformOrigin":case"shadow":case"boxShadow":case"backgroundSize":v=u;break;case"opacity":case"transparency":case"alpha":v=100;break;case"scrollLeft":case"scrollTop":case"scroll":case"scrollTo":v=I(h,d,u);break;default:void 0!==t.getComputedStyle?_=t.getComputedStyle(h,null)[d]:void 0!==h.currentStyle&&(_=h.currentStyle[d]),"auto"===_||void 0===_||""===_?(v=0,n="px"):l.test(_)?(h=_.match(s),m=u=d=void 0,d=parseInt(h[0],10).toString(16),1===d.length&&(d="0"+d),u=parseInt(h[1],10).toString(16),1===u.length&&(u="0"+u),m=parseInt(h[2],10).toString(16),1===m.length&&(m="0"+m),v="#"+d+u+m):(v=parseFloat(_.match(s),10),n=_.match(o))}n={value:v,units:n}}else n={value:m.value,units:h.__animate.state[d].units};c[a].start=n.value}else c[a].start=P(i[a].start);c[a].stop=P(i[a].stop,1),c[a].duration=P(i[a].duration||c[a].dur,1),c[a].time=P(i[a].time,0),c[a].merge=P(i[a].merge,!1),c[a].effect=P(i[a].effect,"linear"),c[a].framerate=P(i[a].framerate,y.frameRate),c[a].units=P(i[a].units,n?n.units:"px"),c[a].end=P(i[a].end,c[a].time+c[a].duration),p.test(a)&&("number"==typeof c[a].start&&(c[a].start=c[a].start+"px "+c[a].start+"px"),"number"==typeof c[a].stop&&(c[a].stop=c[a].stop+"px "+c[a].stop+"px")),c[a].callback={onStart:i[a].onStart,onFrame:i[a].onFrame,onStop:i[a].onStop}}var w;a=n=0;for(var b in c)c.hasOwnProperty(b)&&c[b].end>a&&(a=c[b].end);n=a;for(b in c)c.hasOwnProperty(b)&&c[b].time<n&&(n=c[b].time);for(w in c)if(c.hasOwnProperty(w)){if("string"==typeof c[w].start){b=r;for(var h=w,d=c[w],k=void 0,u=j(d.start),m=j(d.stop),x=k=v=_=void 0,S=y.frameLength,z=d.end,k=x=Math.round(y.frameRate/d.framerate-1),_=d.time;z>_;_+=S)if(v=g+Math.round(_*y.frameRate),0===k){for(var k=u,T=m,R=d,O=_,L=d.end,A="",G="",D=void 0,W=void 0,E=k.value.length,H=0,D=0;E>D;D++)if("object"==typeof k.value[D]&&void 0!==k.value[D].length)for(A+=k.delimiter[D]+"#",H=k.value[D].length,W=0;H>W;W++)G=Math.round(Q[R.effect](O-R.time,k.value[D][W],T.value[D][W]-k.value[D][W],L-R.time),10).toString(16),1===G.length&&(G="0"+G),A+=G;else A+=k.delimiter[D]+Q[R.effect](O-R.time,k.value[D],T.value[D]-k.value[D],L-R.time);k=A+k.delimiter[k.delimiter.length-1],C(v,b,h,k,d.units,!1,!1),k=x}else C(v,b,h),k--;v=g+Math.round(d.end*y.frameRate),C(v,b,h,d.stop,d.units,!1,!0)}else{for(b=r,h=w,d=c[w],_=S=m=u=S=void 0,v=y.frameLength,x=d.end,S=_=Math.round(y.frameRate/d.framerate-1),u=d.time;x>u;u+=v)m=g+Math.round(u*y.frameRate),0===S?(S=Q[d.effect](u-d.time,d.start,d.stop-d.start,d.end-d.time),C(m,b,h,S,d.units,!1,!1),S=_):(C(m,b,h),S--);m=g+Math.round(d.end*y.frameRate),C(m,b,h,d.stop,d.units,!1,!0)}if("function"==typeof c[w].callback.onStart&&(b=g+Math.round(c[w].time*y.frameRate),C(b,r,w,!1,!1,c[w].callback.onStart,!0)),"function"==typeof c[w].callback.onFrame)for(d=c[w].time;d<c[w].end;d+=y.frameLength)h=g+Math.round(d*y.frameRate),C(h,r,w,!1,!1,c[w].callback.onFrame,!0);"function"==typeof c[w].callback.onStop&&(b=g+Math.round(c[w].end*y.frameRate),C(b,r,w,!1,!1,c[w].callback.onStop,!0)),h=g+Math.round(c[w].end*y.frameRate),h>f&&(f=h)}if("function"==typeof i.onStart&&(c=g+Math.round(n*y.frameRate),C(c,r,"callback",!1,!1,i.onStart,!0)),"function"==typeof i.onFrame)for(c=g+Math.round(n*y.frameRate);c<=g+Math.round(a*y.frameRate);c++)C(c,r,"callback",!1,!1,i.onFrame,!0);"function"==typeof i.onStop&&(c=g+Math.round(a*y.frameRate),C(c,r,"callback",!1,!1,i.onStop,!0))},C=function(t,e,i,o,s,a,n){void 0!==e?(void 0===u[t]?(u[t]={},u[t][e]={},u[t][e][i]={value:o,units:s,callback:[],skip:n}):void 0===u[t][e]?(u[t][e]={},u[t][e][i]={value:o,units:s,callback:[],skip:n}):void 0===u[t][e][i]?u[t][e][i]={value:o,units:s,callback:[],skip:n}:(!1!==o&&(u[t][e][i].value=o),!1!==s&&(u[t][e][i].units=s),u[t][e][i].skip=n),"function"==typeof a&&u[t][e][i].callback.push(a)):void 0===u[t]&&(u[t]={})},z=function(t){!1===_&&(_=!0,$=(new Date).getTime(),v=t,R())},T=function(t,e){var i;if(void 0!==t&&void 0!==e&&void 0!==t.__animate)for(i in u)u.hasOwnProperty(i)&&void 0!==u[i][t.__animate.id]&&void 0!==u[i][t.__animate.id][e]&&delete u[i][t.__animate.id][e];else if(void 0!==t&&void 0!==t.__animate)for(i in u)u.hasOwnProperty(i)&&void 0!==u[i][t.__animate.id]&&delete u[i][t.__animate.id];else for(i in u)u.hasOwnProperty(i)&&delete u[i]},R=function(){var t,e,i,o;if(f>=g){o=y.frameDelay-((new Date).getTime()-$-g*y.frameDelay),0>o?o=0:o>y.frameDelay&&(o=y.frameDelay),setTimeout(function(){R(o?!0:!1)},o);for(e in u[g])if(u[g].hasOwnProperty(e))for(i in t=u[g][e])t.hasOwnProperty(i)&&O(e,i,t[i].value,t[i].units,t[i].callback,!0===t[i].skip?!0:o?!0:!1);delete u[g],g++,(new Date).getTime()}else _=!1,g=0,"function"==typeof v&&(v(),v=!1)},O=function(t,e,i,o,s,a){var n=m[t].__animate.state[e];if(!0===a&&!1!==i&&(void 0===n||n.value!=i||n.units!=o))switch(e){case"zIndex":m[t].style.zIndex=i;break;case"alpha":case"transparency":case"opacity":G(m[t],i);break;case"scroll":case"scrollTop":case"scrollLeft":case"scrollTo":L(m[t],e,i);break;case"shadow":case"boxShadow":D(m[t],i);break;case"rotate":W(m[t],i);break;case"transformOrigin":q(m[t],i);break;case"transform":E(m[t],i);break;case"backgroundSize":H(m[t],i);break;case"borderRadius":F(m[t],i,o);break;case"borderRadiusTopRight":B(m[t],"top","right",i,o);break;case"borderRadiusTopLeft":B(m[t],"top","left",i,o);break;case"borderRadiusBottomRight":B(m[t],"bottom","right",i,o);break;case"borderRadiusBottomLeft":B(m[t],"bottom","left",i,o);break;default:m[t].style[e]="string"==typeof i?i:i+o}if(m[t].__animate.state[e]={value:i,units:o},void 0!==s&&0<s.length)for(a=0;a<s.length;a++)"function"==typeof s[a]&&s[a](m[t],{type:e,value:i,units:o,id:t})},L=function(e,i,o){void 0!==e.tagName||"function"!=typeof e.scroll&&"function"!=typeof e.scrollTo||"string"!=typeof o?(o="string"==typeof o?o.match(s):[o,o],"scrollTop"===i?e.scrollTop=parseInt(o[1],10):"scrollLeft"===i?e.scrollLeft=parseInt(o[0],10):(e.scrollLeft=parseInt(o[0],10),e.scrollTop=parseInt(o[1],10))):(o=o.match(s))&&(self.pageYOffset?t.scroll(parseInt(o[0],10),parseInt(o[1],10)):document.documentElement&&document.documentElement.scrollTop?t.scrollTo(parseInt(o[0],10),parseInt(o[1],10)):document.body&&t.scrollTo(parseInt(o[0],10),parseInt(o[1],10)))},A=function(t,e,i,o){t.style[e]=i+(o?o:"")},G=function(t,e){"filter"===c.opacity?A(t,"filter","alpha(opacity="+e+")"):A(t,c.opacity,e/100)},D=function(t,e){A(t,c.shadow,e)},W=function(t,e){A(t,c.transform,"rotate("+e+"deg)")},E=function(t,e){A(t,c.transform,e)},H=function(t,e){A(t,c.backgroundSize,e)},q=function(t,e){A(t,c.transformOrigin,e)},F=function(t,e,i){A(t,c.borderRadius,e,i)},B=function(t,e,i,o,s){"top"===e?"left"===i?A(t,c.borderRadiusTopLeft,o,s):A(t,c.borderRadiusTopRight,o,s):"left"===i?A(t,c.borderRadiusBottomLeft,o,s):A(t,c.borderRadiusBottomRight,o,s)},N=function(t){if(void 0===t.__animate){var e=m.length;return t.__animate={id:e,state:{},callback:{},dragging:!1},m.push(t),e}return t.__animate.id},Q={linear:function(t,e,i,o){return i*t/o+e},quadIn:function(t,e,i,o){return i*(t/=o)*t+e},quadOut:function(t,e,i,o){return-i*(t/=o)*(t-2)+e},quadInOut:function(t,e,i,o){return 1>(t/=o/2)?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},cubicIn:function(t,e,i,o){return i*(t/=o)*t*t+e},cubicOut:function(t,e,i,o){return i*((t=t/o-1)*t*t+1)+e},cubicInOut:function(t,e,i,o){return 1>(t/=o/2)?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeIn:function(t,e,i,o){return i*(t/=o)*t*t+e},easeOut:function(t,e,i,o){return i*((t=t/o-1)*t*t+1)+e},easeInOut:function(t,e,i,o){return 1>(t/=o/2)?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},quartIn:function(t,e,i,o){return i*(t/=o)*t*t*t+e},quartOut:function(t,e,i,o){return-i*((t=t/o-1)*t*t*t-1)+e},quartInOut:function(t,e,i,o){return 1>(t/=o/2)?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},quintIn:function(t,e,i,o){return i*(t/=o)*t*t*t*t+e},quintOut:function(t,e,i,o){return i*((t=t/o-1)*t*t*t*t+1)+e},quintInOut:function(t,e,i,o){return 1>(t/=o/2)?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},sineIn:function(t,e,i,o){return-i*Math.cos(t/o*(Math.PI/2))+i+e},sineOut:function(t,e,i,o){return i*Math.sin(t/o*(Math.PI/2))+e},sineInOut:function(t,e,i,o){return-i/2*(Math.cos(Math.PI*t/o)-1)+e},expoIn:function(t,e,i,o){return 0===t?e:i*Math.pow(2,10*(t/o-1))+e},expoOut:function(t,e,i,o){return t===o?e+i:i*(-Math.pow(2,-10*t/o)+1)+e},expoInOut:function(t,e,i,o){return 0===t?e:t===o?e+i:1>(t/=o/2)?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},circIn:function(t,e,i,o){return-i*(Math.sqrt(1-(t/=o)*t)-1)+e},circOut:function(t,e,i,o){return i*Math.sqrt(1-(t=t/o-1)*t)+e},circInOut:function(t,e,i,o){return 1>(t/=o/2)?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},bounceIn:function(t,e,i,o){return i-Q.bounceOut(o-t,0,i,o)+e},bounceOut:function(t,e,i,o){return(t/=o)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},bounceInOut:function(t,e,i,o){return o/2>t?.5*Q.bounceIn(2*t,0,i,o)+e:.5*Q.bounceOut(2*t-o,0,i,o)+.5*i+e},elasticIn:function(t,e,i,o,s,a){if(0===t)return e;if(1===(t/=o))return e+i;a||(a=.3*o),s||(s=1);var n=0;return s<Math.abs(i)?(s=i,n=a/4):n=a/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*--t)*Math.sin(2*(t*o-n)*Math.PI/a))+e},elasticOut:function(t,e,i,o,s,a){if(0===t)return e;if(1===(t/=o))return e+i;a||(a=.3*o),s||(s=1);var n=0;return s<Math.abs(i)?(s=i,n=a/4):n=a/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin(2*(t*o-n)*Math.PI/a)+i+e},elasticInOut:function(t,e,i,o,s,a){if(0===t)return e;if(2===(t/=o/2))return e+i;a||(a=.3*o*1.5),s||(s=1);var n=0;return s<Math.abs(i)?(s=i,n=a/4):n=a/(2*Math.PI)*Math.asin(i/s),1>t?-.5*s*Math.pow(2,10*--t)*Math.sin(2*(t*o-n)*Math.PI/a)+e:s*Math.pow(2,-10*--t)*Math.sin(2*(t*o-n)*Math.PI/a)*.5+i+e}};e.tween=S,e.action=O,e.register=N,e.shadow=D,e.opacity=G,e.borderRadius=F,e.borderRadiusCorner=B,e.backgroundSize=H,e.transformOrigin=q,e.rotate=W,e.transform=E,e.clear=T,e.play=z,e.property=M,e.getScroll=I,e.scroll=L,e.framerate=x,x(w?30:45),function(){var t,e=document.getElementsByTagName("html");if(void 0!==e[0])for(t in e=e[0].style,c)if(c.hasOwnProperty(t))for(var i=0;i<c[t].length;i++){if(void 0!==e[c[t][i]]){c[t]=c[t][i];break}if(void 0!==e[c[t][i].replace(d,"ms").replace(h,k)]){c[t]=c[t][i].replace(d,"ms").replace(h,k);break}}}();try{b()}catch(U){}return e}(t.gmediaMosaic.JSTween||{})}(window),/** @preserve
 *  mustache.js Logic-less templates in JavaScript
 *  See http://mustache.github.com/ for more info.
 */
function(t){t.gmediaMosaic||(t.gmediaMosaic={}),t.gmediaMosaic.Mustache=function(){var t=function(){};return t.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(t,e,i,o){if(o||(this.context=e,this.buffer=[]),!this.includes("",t))return o?t:void this.send(t);t=this.render_pragmas(t);var s=this.render_section(t,e,i);return o?this.render_tags(s,e,i,o):void this.render_tags(s,e,i,o)},send:function(t){""!=t&&this.buffer.push(t)},render_pragmas:function(t){if(!this.includes("%",t))return t;var e=this,i=RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return t.replace(i,function(t,i,o){if(!e.pragmas_implemented[i])throw{message:"This implementation of mustache doesn't understand the '"+i+"' pragma"};if(e.pragmas[i]={},o){var s=o.split("=");e.pragmas[i][s[0]]=s[1]}return""})},render_partial:function(t,e,i){if(t=this.trim(t),!i||void 0===i[t])throw{message:"unknown_partial '"+t+"'"};return"object"!=typeof e[t]?this.render(i[t],e,i,!0):this.render(i[t],e[t],i,!0)},render_section:function(t,e,i){if(!this.includes("#",t)&&!this.includes("^",t))return t;var o=this,s=RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return t.replace(s,function(t,s,a,n){var r=o.find(a,e);return"^"==s?!r||o.is_array(r)&&0===r.length?o.render(n,e,i,!0):"":"#"==s?o.is_array(r)?o.map(r,function(t){return o.render(n,o.create_context(t),i,!0)}).join(""):o.is_object(r)?o.render(n,o.create_context(r),i,!0):"function"==typeof r?r.call(e,n,function(t){return o.render(t,e,i,!0)}):r?o.render(n,e,i,!0):"":void 0})},render_tags:function(t,e,i,o){for(var s=this,a=function(){return RegExp(s.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+s.ctag+"+","g")},n=a(),r=function(t,o,r){switch(o){case"!":return"";case"=":return s.set_delimiters(r),n=a(),"";case">":return s.render_partial(r,e,i);case"{":return s.find(r,e);default:return s.escape(s.find(r,e))}},l=t.split("\n"),p=0;p<l.length;p++)l[p]=l[p].replace(n,r,this),o||this.send(l[p]);return o?l.join("\n"):void 0},set_delimiters:function(t){var e=t.split(" ");this.otag=this.escape_regex(e[0]),this.ctag=this.escape_regex(e[1])},escape_regex:function(t){if(!arguments.callee.sRE){var e=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=RegExp("(\\"+e.join("|\\")+")","g")}return t.replace(arguments.callee.sRE,"\\$1")},find:function(t,e){function i(t){return t===!1||0===t||t}t=this.trim(t);var o;return i(e[t])?o=e[t]:i(this.context[t])&&(o=this.context[t]),"function"==typeof o?o.apply(e):void 0!==o?o:""},includes:function(t,e){return-1!=e.indexOf(this.otag+t)},escape:function(t){return t=(null===t?"":t)+"",t.replace(/&(?!\w+;)|["'<>\\]/g,function(t){switch(t){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return t}})},create_context:function(t){if(this.is_object(t))return t;var e=".";this.pragmas["IMPLICIT-ITERATOR"]&&(e=this.pragmas["IMPLICIT-ITERATOR"].iterator);var i={};return i[e]=t,i},is_object:function(t){return t&&"object"==typeof t},is_array:function(t){return"[object Array]"===Object.prototype.toString.call(t)},trim:function(t){return t.replace(/^\s*|\s*$/g,"")},map:function(t,e){if("function"==typeof t.map)return t.map(e);for(var i=[],o=t.length,s=0;o>s;s++)i.push(e(t[s]));return i}},{name:"mustache.js",version:"0.3.1-dev",to_html:function(e,i,o,s){var a=new t;return s&&(a.send=s),a.render(e,i,o),s?void 0:a.buffer.join("\n")}}}()}(window),/* @preserve
 *  Modernizr 2.8.3 (Custom Build) | MIT & BSD
 *  Build: http://modernizr.com/download/#-csstransforms-csstransitions-testprop-testallprops-domprefixes
 */
/** @preserve
 * Modernizr 3.3.1 (Custom Build) | MIT *
 * http://modernizr.com/download/?-csstransforms-csstransitions-domprefixes-testallprops-testprop
 * */
!function(t,e,i){function o(t,e){return typeof t===e}function s(){var t,e,i,s,a,n,r;for(var l in _)if(_.hasOwnProperty(l)){if(t=[],e=_[l],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(s=o(e.fn,"function")?e.fn():e.fn,a=0;a<t.length;a++)n=t[a],r=n.split("."),1===r.length?y[r[0]]=s:(!y[r[0]]||y[r[0]]instanceof Boolean||(y[r[0]]=new Boolean(y[r[0]])),y[r[0]][r[1]]=s),w.push((s?"":"no-")+r.join("-"))}}function a(t,e){return!!~(""+t).indexOf(e)}function n(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function r(t,e){return function(){return t.apply(e,arguments)}}function l(t,e,i){var s;for(var a in t)if(t[a]in e)return i===!1?t[a]:(s=e[t[a]],o(s,"function")?r(s,i||e):s);return!1}function p(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):I?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function d(){var t=e.body;return t||(t=h(I?"svg":"body"),t.fake=!0),t}function c(t,i,o,s){var a,n,r,l,p="modernizr",c=h("div"),u=d();if(parseInt(o,10))for(;o--;)r=h("div"),r.id=s?s[o]:p+(o+1),c.appendChild(r);return a=h("style"),a.type="text/css",a.id="s"+p,(u.fake?u:c).appendChild(a),u.appendChild(c),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),c.id=p,u.fake&&(u.style.background="",u.style.overflow="hidden",l=M.style.overflow,M.style.overflow="hidden",M.appendChild(u)),n=i(c,t),u.fake?(u.parentNode.removeChild(u),M.style.overflow=l,M.offsetHeight):c.parentNode.removeChild(c),!!n}function u(e,o){var s=e.length;if("CSS"in t&&"supports"in t.CSS){for(;s--;)if(t.CSS.supports(p(e[s]),o))return!0;return!1}if("CSSSupportsRule"in t){for(var a=[];s--;)a.push("("+p(e[s])+":"+o+")");return a=a.join(" or "),c("@supports ("+a+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return i}function m(t,e,s,r){function l(){d&&(delete j.style,delete j.modElem)}if(r=o(r,"undefined")?!1:r,!o(s,"undefined")){var p=u(t,s);if(!o(p,"undefined"))return p}for(var d,c,m,g,f,_=["modernizr","tspan"];!j.style;)d=!0,j.modElem=h(_.shift()),j.style=j.modElem.style;for(m=t.length,c=0;m>c;c++)if(g=t[c],f=j.style[g],a(g,"-")&&(g=n(g)),j.style[g]!==i){if(r||o(s,"undefined"))return l(),"pfx"==e?g:!0;try{j.style[g]=s}catch(v){}if(j.style[g]!=f)return l(),"pfx"==e?g:!0}return l(),!1}function g(t,e,i,s,a){var n=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+x.join(n+" ")+n).split(" ");return o(e,"string")||o(e,"undefined")?m(r,e,s,a):(r=(t+" "+k.join(n+" ")+n).split(" "),l(r,e,i))}function f(t,e,o){return g(t,i,i,e,o)}var _=[],v={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){_.push({name:t,fn:e,options:i})},addAsyncTest:function(t){_.push({name:null,fn:t})}},y=function(){};y.prototype=v,y=new y;var w=[],b="Moz O ms Webkit",k=v._config.usePrefixes?b.toLowerCase().split(" "):[];v._domPrefixes=k;var x=v._config.usePrefixes?b.split(" "):[];v._cssomPrefixes=x;var M=e.documentElement,I="svg"===M.nodeName.toLowerCase(),P={elem:h("modernizr")};y._q.push(function(){delete P.elem});var j={style:P.elem.style};y._q.unshift(function(){delete j.style}),v.testProp=function(t,e,o){return m([t],i,e,o)},v.testAllProps=g,v.testAllProps=f,y.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&f("transform","scale(1)",!0)}),y.addTest("csstransitions",f("transition","all",!0)),s(),delete v.addTest,delete v.addAsyncTest;for(var S=0;S<y._q.length;S++)y._q[S]();t.gmediaMosaic.Modernizr=y}(window,document),/** @preserve
 *  imagesLoaded.js Because you can't do ".load()"" on cached images.
 *  See http://desandro.github.com/imagesloaded/ for more info.
 */
function(t,e){var i="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(o){function s(){var e=t(d),i=t(c);r&&(c.length?r.reject(p,e,i):r.resolve(p)),t.isFunction(o)&&o.call(n,p,e,i)}function a(e,o){e.src===i||-1!==t.inArray(e,h)||(h.push(e),o?c.push(e):d.push(e),t.data(e,"imagesLoaded",{isBroken:o,src:e.src}),l&&r.notifyWith(t(e),[o,p,t(d),t(c)]),p.length===h.length&&(setTimeout(s),p.unbind(".imagesLoaded")))}var n=this,r=t.isFunction(t.Deferred)?t.Deferred():0,l=t.isFunction(r.notify),p=n.find("img").add(n.filter("img")),h=[],d=[],c=[];return t.isPlainObject(o)&&t.each(o,function(t,e){"callback"===t?o=e:r&&r[t](e)}),p.length?p.bind("load.imagesLoaded error.imagesLoaded",function(t){a(t.target,"error"===t.type)}).each(function(o,s){var n=s.src,r=t.data(s,"imagesLoaded");r&&r.src===n?a(s,r.isBroken):s.complete&&s.naturalWidth!==e?a(s,0===s.naturalWidth||0===s.naturalHeight):(s.readyState||s.complete)&&(s.src=i,s.src=n)}):s(),r?r.promise(n):n}}(jQuery),/** @preserve
 *  jQuery gmediaMosaic
 *  requires: jQuery 1.7+ (included externally), JSTween, Mustache, Modernizr, & ImagesLoaded (included above)
 *  added: prettyPhoto_mod (included below)
 */
function($){var t=[];window.gmediaMosaic&&(window.gmediaMosaic.$=$,window.gmediaMosaic.mosaics=[]);var e="gmediaMosaic",i=function(t,e){this.version="1.9",this.el=t,this.obj=$(t),this._id=this.obj.attr("data-gmid"),this.elID="GmediaGallery_"+this._id,this._options=e,this.Storage={},this.pp={},this.init()};$.extend(i.prototype,{log:{info:function(t){this.prefix(t)},error:function(t){this.prefix("ERROR: "+t)},prefix:function(t){this.print("gmediaMosaic: "+t)},print:function(t){"undefined"!==console&&console.log(t)}},_defaults:{gallery:"gmedia_mosaic_content",order:"rows",loading_transition:"fade",responsive_transition_settings:{time:0,duration:.3,effect:"easeOut"},sizes:{thumb:300,full:2200},modal_name:"gmlightbox",modal_ready_callback:null,key:"",lightbox_theme:"pp_default"},_defaults_int:{padding:2,columns:0,min_columns:0,max_columns:0,width:0,height:0,lightbox_slideshow:5e3,lightbox_animation_speed:200,lightbox_overlay_gallery_max:30,lightbox_opacity:80},_defaults_bool:{links:!0,external_links:!1,center:!0,prevent_crop:!1,show_loading:!1,responsive_transition:!0,modal_group:!0,is_mobile:!1,log_gallery_data:!1,lightbox:!0,lightbox_mobile:!0,lightbox_show_title:!0,lightbox_show_caption:!0,lightbox_autoplay_slideshow:!1,lightbox_allow_resize:!0,lightbox_allow_expand:!0,lightbox_keyboard_shortcuts:!0,lightbox_overlay_gallery:!1,deep_links:!0,social_share_enabled:!0,share_post_link:!1,views_enabled:!0,likes_enabled:!0,comments_enabled:!0},template:'<div class="gmediaMosaic loading {{transition}}" style="width:{{width}}px; height:{{height}}px; {{#center}}margin-left:auto; margin-right:auto;{{/center}}">{{#images}}    <div class="gmMosaicItem loading" data-id="{{id}}" style="width:{{#width}}{{constraint}}{{/width}}px; height:{{#height}}{{constraint}}{{/height}}px; position:absolute; {{#position}}top:{{top}}px; left:{{left}}px;{{/position}}">	    {{#link}}<a href="{{path}}" {{#external}}target="_blank"{{/external}} {{#modal}}rel="{{modal}}"{{/modal}}>{{/link}}		{{^link}}<span>{{/link}}		    <img class="gmMosaicItem_thumb" src="{{src}}" style="width:{{#width}}{{adjusted}}{{/width}}px; height:{{#height}}{{adjusted}}{{/height}}px; {{#adjustment}}{{type}}:-{{value}}px;{{/adjustment}}" title="{{alt}}" alt="{{alt}}"/>		{{#link}}</a>{{/link}}		{{^link}}</span>{{/link}}	    <div class="gmMosaicItem_caption">	        <div class="gmMosaicItem_title">{{alt}}</div>	        <div class="gmMosaicItem_text">{{{caption}}}</div>	    </div>	</div>{{/images}}</div>',loading_template:'<div id="gmediaMosaic_{{id}}" class="gmediaMosaic"><div class="gmediaMosaicLoading">loading gallery...</div></div>',init:function(){var t=this;t.opts=$.extend({},t._defaults,t._defaults_int,t._defaults_bool,t._options),$.each(t.opts,function(e,i){e in t._defaults_bool?t.opts[e]=!(!i||"0"==i||"false"==i):e in t._defaults_int&&(t.opts[e]=parseInt(i))}),this.opts=t.opts,this._options=$.extend(!0,{},this.opts),this.preload="GMG_preloadify"+this._id,this.gmedias={},this.images=[],this.columns=[];for(var e=["columns","width","height"],i=0;i<e.length;i++)0===this.opts[e[i]]&&(this.opts[e[i]]="auto");if(window.gmediaMosaic.transition_mem=this.getTransition(),"auto"===this.opts.width&&(this.opts.width=this.obj.width()),"string"==typeof this.opts.gallery){if(""===this.opts.gallery)return void this.log.error("No JSON object defined.");if(void 0===window[this.opts.gallery])return this.log.error("No JSON object found when referencing '"+this.opts.gallery+"'."),void this.log.info("Make sure your variable is avaible to the global scope (window['"+this.opts.gallery+"']) or simply pass the object literal (gallery:"+this.opts.gallery+') instead of a string (gallery:"'+this.opts.gallery+'").');this.opts.gallery=window[this.opts.gallery]}return 0===this.opts.gallery.length?void this.log.error("Specified gallery data is empty."):(this.opts.prevent_crop&&"auto"!==this.opts.height&&(this.log.info("Height must be set to 'auto' to Prevent Cropping. The value for height ("+this.opts.height+") is being ignored so as to prevent cropping."),this.opts.height="auto"),void $.when(this.getGalleryData()).then(function(e){t.opts.gallery=e,t.configure(),GmediaGallery.license||setInterval(function(){$("a.bl"+t._id).length||(t.opts.gallery=e,t.render())},1e4)}))},configure:function(){var t=this;if(window.sessionStorage&&(t.Storage=sessionStorage.getItem(t.elID),t.Storage?t.Storage=JSON.parse(t.Storage):t.Storage={}),this.opts.show_loading&&this.obj.html(gmediaMosaic.Mustache.to_html(this.loading_template,{id:this._id})),this.opts.columns=this.autoCols(),this.col_width=Math.floor((this.opts.width-this.opts.padding*(this.opts.columns-1))/this.opts.columns),this._size=this.pickImageSize(this.opts.gallery),this._size)for(var e=0;e<this.opts.gallery.length;e++)this.opts.gallery[e].thumb=this.opts.gallery[e].sizes[this._size];this.hasDims()?(this.opts.gallery=this.prepData(this.opts.gallery),this.render(),this.refresh()):$.when(this.preloadify()).then(function(){t.opts.gallery=t.addPreloadData(t.opts.gallery),t.render(),t.refresh()})},render:function(){var t=this;if(this.obj.html(this.makeMosaic()),this.obj.imagesLoaded({progress:function(t,e,i){setTimeout(function(){$(i[i.length-1]).parents(".gmMosaicItem").removeClass("loading")},500)},always:function(){setTimeout(function(){t.obj.children(".gmediaMosaic").removeClass("loading")},1500)}}),this.bindEvents(),this.modalCallback(),!GmediaGallery.license){var e="<a class='gmlove bl"+this._id+"' href='http://codeasily.com/portfolio-item/gmedia-mosaic/' target='_blank' style='background:rgba(216,255,22,0.8)!important;float:right!important;position:relative!important;left:0!important;right:0!important;top:0!important;bottom:0!important;z-index:9999999!important;width:auto!important;height:auto!important;text-indent:0!important;overflow:visible!important;display:block!important;padding: 4px 10px!important;margin:0 0 -3em 0!important;font-size:14px!important;line-height:120%!important;color:#123456!important;font-weight:bold!important;'>built with GmediaGallery</a>";this.obj.prepend(e)}this.opts.log_gallery_data&&this.logGalleryData()},makeMosaic:function(){var e=this;$.each(this.opts.gallery,function(){var t,i=$.extend(!0,{},this),o=i.thumb&&""!==i.thumb?i.thumb:GmediaGallery.upload_dirurl+i.src;i.full=GmediaGallery.upload_dirurl+i.src,i.src=o,i.padding=e.opts.padding,i.width.adjusted=e.col_width,i.height.adjusted=Math.floor(i.height.original*i.width.adjusted/i.width.original),e.opts.links&&i.url?(i.link=!0,i.path=i.url,i.external=e.opts.external_links):e.opts.links?(i.link=!0,i.path=i.full,i.external=e.opts.external_links,-1!==$.inArray(i.ext,["mp4","webm","mp3","ogg","pdf"])&&(i.path+="?iframe=true","audio"==i.type?i.path+="&width=60%&height=60%":i.path+="&width=90%&height=90%")):i.link=!1,e.opts.modal_name&&i.link&&e._isLinkModal(i.path)&&(t=e.opts.modal_group?e.opts.modal_name+"["+e._id+"]":e.opts.modal_name,i.modal=t),i.viewed=!1,i.liked=!1,e.Storage[i.id]&&e.Storage[i.id].status&&(i.viewed=!0,"liked"==e.Storage[i.id].status?i.liked=!0:i.liked=!1),e.images.push(i),e.gmedias[i.id]=i}),this.images=this.errorCheck(e.images),t[this._id]=this.images.slice(0);var i=this.makeMosaicView();return this.layoutHasErrors(i)?(this.log.error("Your gallery's height is too small for your current settings and won't render correctly."),gmediaMosaic.Mustache.to_html("",{})):gmediaMosaic.Mustache.to_html(this.template,i)},makeMosaicView:function(t){"random"!==this.opts.order||t||this.images.sort(function(){return.5-Math.random()}),this.columns=this.sortIntoRows(this.images),"columns"===this.opts.order&&(this.columns=this.sortIntoColumns(this.columns,this.images)),"masonry"===this.opts.order&&(this.columns=this.sortIntoMasonry(this.images));var e,i,o,s={id:this._id,transition:this.getTransition(),width:this.col_width*this.columns.length+this.opts.padding*(this.columns.length-1),center:this.opts.center,columns:[]},a=[];for(i=0;i<this.columns.length;i++){for(e=0,o=0;o<this.columns[i].length;o++)e+=this.columns[i][o].height.adjusted;e+=(this.columns[i].length-1)*this.opts.padding,a.push(e),s.columns[i]={},s.columns[i].images=this.columns[i],s.columns[i].height=e,s.columns[i].padding=this.opts.padding}var n=Math.min.apply(Math,a),r=Math.max.apply(Math,a),l=Math.ceil((n+r)/2);for(s="auto"===this.opts.height?this.adjustHeights(s,l):this.adjustHeights(s,this.opts.height),i=0;i<s.columns.length;i++)for(e=0,o=0;o<s.columns[i].images.length;o++)s.columns[i].images[o].position={top:e,left:i*this.col_width+i*this.opts.padding},e=e+s.columns[i].images[o].height.constraint+this.opts.padding;return s.images=this.unpackColumns(s.columns),s},autoCols:function(){if(!this._auto_cols&&("auto"!==this.opts.columns||0===this.opts.columns))return this._auto_cols=!1,this.opts.columns;this._auto_cols=!0;var t,e=this.opts.width,i=this.opts.gallery.length,o=Math.floor(this.opts.sizes.thumb-this.opts.sizes.thumb/3*(this.opts.is_mobile?2:1));return t=i<this.opts.columns?i:e<this.opts.sizes.thumb?1:Math.floor(e/o),this.opts.min_columns&&t<this.opts.min_columns&&(t=this.opts.min_columns),this.opts.max_columns&&t>this.opts.max_columns&&(t=this.opts.max_columns),t},sortIntoRows:function(t){for(var e=$.extend(!0,[],t),i=0,o=[],s=0;s<e.length;s++)i=s%this.opts.columns,o[i]||(o[i]=[]),o[i].push(e[s]);return o},sortIntoColumns:function(t,e){for(var i=$.extend(!0,[],e),o=[],s=0;s<t.length;s++)for(var a=0;a<t[s].length;a++)o[s]||(o[s]=[]),o[s].push(i[0]),i.shift();return o},sortIntoMasonry:function(t){var e,i=$.extend(!0,[],t),o=[],s=0,a=[];for(e=0;e<this.opts.columns;e++)o[e]=0,a.push([]);for(e=0;e<i.length;e++)s=$.inArray(Math.min.apply(Math,o),o),a[s].push(i[e]),o[s]=o[s]+i[e].height.adjusted;return a},unpackColumns:function(t){for(var e,i=[],o=0;o<this.images.length;o++)e=this.deepSearch(t,"id",this.images[o].id),i.push(e);return i},deepSearch:function(t,e,i){var o,s=null,a=0;if(t instanceof Array){for(a=0;a<t.length;a++)if(s=this.deepSearch(t[a],e,i))return s}else for(o in t)if(t.hasOwnProperty(o)){if(o==e&&t[o]==i)return t;if((t[o]instanceof Object||t[o]instanceof Array)&&(s=this.deepSearch(t[o],e,i)))return s}return s},adjustHeights:function(t,e){var i=[],o=null,s=0;t=this.markLastColumn(t);for(var a=0;a<t.columns.length;a++)o=t.columns[a],t=this.markLastImageInColumn(t,a),o=this.opts.prevent_crop?this.scaleColumn(o,o.height):this.scaleColumn(o,e),i.push(o.height),t.columns[a]=o;return s=this.opts.prevent_crop?Math.max.apply(Math,i):Math.min.apply(Math,i),t.height=s,this.opts.prevent_crop||(t=this.flattenColumns(t,s)),t=this.adjustImagesToConstraint(t)},scaleColumn:function(t,e){for(var i=t.images.length,o=this.opts.padding*(i-1),s=t.height-o,a=e-o,n=null,r=0,l=0,p=0,h=0;i>h;h++)n=t.images[h],l=n.height.adjusted,p=Math.floor(a*(Math.floor(l/s*1e3)/1e3)),r+=p,n=this.setImageContraints(n,this.col_width,p);return t.height=r+o,t},flattenColumns:function(t,e){for(var i,o=null,s=null,a=0,n=null,r=0;r<t.columns.length;r++)o=t.columns[r],s=o.images[o.images.length-1],a=Math.abs(o.height-e),n=this.opts.padding*(o.images.length-1),a>0&&(i=o.height>e?s.height.constraint-a:s.height.constraint+a,s=this.setImageContraints(s,null,i));return t},setImageContraints:function(t,e,i){return t.width.constraint=e||t.width.constraint,t.height.constraint=i||t.height.constraint,t},adjustImagesToConstraint:function(t){for(var e,i,o=0;o<t.columns.length;o++){e=t.columns[o];for(var s=0;s<e.images.length;s++)i=e.images[s],i.height.adjusted>i.height.constraint?i.adjustment={type:"top",value:Math.floor((i.height.adjusted-i.height.constraint)/2)}:(i.width.adjusted=Math.floor(i.width.adjusted*i.height.constraint/i.height.adjusted),i.height.adjusted=i.height.constraint,i.adjustment={type:"left",value:Math.floor((i.width.adjusted-i.width.constraint)/2)}),e.images[s]=i;t.columns[o]=e}return t},findSmallestImage:function(t){for(var e=0,i=0,o=0;o<t.length;o++)0===e?e=t[o].height.adjusted:t[o].height.adjusted<e&&(e=t[o].height.adjusted,i=o);return{height:e,index:i}},findLargestImage:function(t){for(var e=0,i=0,o=0;o<t.length;o++)t[o].height.adjusted>e&&(e=t[o].height.adjusted,i=o);return{height:e,index:i}},markLastColumn:function(t){return t.columns[t.columns.length-1].last=!0,t},markLastImageInColumn:function(t,e){return t.columns[e].images[t.columns[e].images.length-1].last=!0,t},errorCheck:function(t){var e=[];$.each(t,function(i){isNaN(t[i].height.adjusted)&&e.push(i)});for(var i=e.length-1;i>=0;i--){this.log.error("The following image failed to load and was skipped.\n"+t[e[i]].src);var o=t.slice(e[i]+1);t.length=e[i],t.push.apply(t,o)}return t},layoutHasErrors:function(t){for(var e=!1,i=0;i<t.columns.length;i++)for(var o=0;o<t.columns[i].images.length;o++)t.columns[i].images[o].height.constraint<=0&&(e=!0);return e},preloadify:function(){var t=$("<div>").attr({id:this.preload,"class":"GMG_preloadify"});return $.each(this.opts.gallery,function(){var e=this.thumb&&""!==this.thumb?this.thumb:this.src,i=$("<img>").attr({src:e});t.append(i)}),$("body").append(t),t.imagesLoaded()},addPreloadData:function(t){var e=$("#"+this.preload);return $.each(t,function(){var t=this.thumb&&""!==this.thumb?this.thumb:this.src,i=e.find('img[src="'+t+'"]');this.width={original:i.width()},this.height={original:i.height()}}),t},prepData:function(t){var e={w:0,h:0};return $.each(t,function(){e.w=parseInt(this.width),e.h=parseInt(this.height),this.width={original:e.w},this.height={original:e.h}}),t},getGalleryData:function(){return this.opts.gallery},pickImageSize:function(t){var e=null;if(!this.opts.sizes||!t[0].sizes)return null;for(var i in this.opts.sizes)!e&&this.opts.sizes[i]>this.col_width&&(e=i);return e||(e="full"),e},swapImage:function(t,e){var i=this.obj.find('div[data-id="'+t.id+'"] img.gmMosaicItem_thumb'),o=i.parent(),s=$(i[0].outerHTML).attr("src",t.sizes[e]).attr("class",e).opacity(0);0===o.find("."+e).length&&0===o.find('img[src="'+t.sizes[e]+'"]').length&&(o.append(s),s.imagesLoaded({fail:function(t){t.remove()},done:function(t){var e=t.siblings(),i=e.eq(0).data();t.data(i),t.opacity(100),e.remove(),setTimeout(function(){t.removeClass().addClass("gmMosaicItem_thumb")},0)}}))},hasDims:function(){var t=!1,e=!0;if(void 0!==this.hasSpecifiedDims)return this.hasSpecifiedDims;for(var i=0;i<this.opts.gallery.length;i++)this.opts.gallery[i].hasOwnProperty("width")&&this.opts.gallery[i].hasOwnProperty("height")?isNaN(parseInt(this.opts.gallery[i].width))||isNaN(parseInt(this.opts.gallery[i].height))||0===this.opts.gallery[i].width||0===this.opts.gallery[i].height?e=!1:t=!0:e=!1;return t&&!e&&this.log.error("Width / Height data not present for all images."),this.hasSpecifiedDims=e,this.hasSpecifiedDims},getTransition:function(){var t="none";return gmediaMosaic.Modernizr.csstransitions&&gmediaMosaic.Modernizr.csstransforms&&(t=this.opts.loading_transition),"transition-"+t},bindEvents:function(){var t=this;$(window).unbind("resize.gmediaMosaic"+this._id).bind("resize.gmediaMosaic"+this._id,function(){t.refresh()})},refresh:function(){var e=this.opts.order===this._options.order?!0:!1;this.opts=$.extend({},this.opts,this._options);var i,o=["columns","width","height"];for(i=0;i<o.length;i++)0===this.opts[o[i]]?this.opts[o[i]]="auto":this.opts[o[i]]=this._options[o[i]];this._auto_cols=this._options.columns>0?!1:!0;var s=null,a=null,n=null,r=null,l=this.pickImageSize(this.images);for(this.obj.addClass("resizing"),"auto"===this.opts.width&&(this.opts.width=this.obj.width()),this.opts.columns=this.autoCols(),this.col_width=Math.floor((this.opts.width-this.opts.padding*(this.opts.columns-1))/this.opts.columns),i=0;i<this.images.length;i++)s=this.images[i],s.width.adjusted=this.col_width,s.height.adjusted=Math.floor(s.height.original*s.width.adjusted/s.width.original),l&&this.opts.sizes[l]>this.opts.sizes[this._size]&&this.swapImage(s,l),this.images[i]=s;for(l&&(this._size=l),"random"!==this.opts.order&&(this.images=t[this._id].slice(0)),r=this.makeMosaicView(e),r.images=this.unpackColumns(r.columns),this.obj.children().css({width:r.width,height:r.height}),i=0;i<r.images.length;i++)s=r.images[i],n=this.obj.find('div[data-id="'+s.id+'"]'),a=$("img.gmMosaicItem_thumb",n),a.data("gmedia",s),a.css({width:s.width.adjusted+"px",height:s.height.adjusted+"px",top:"0px",left:"0px"}),a.css(s.adjustment.type,-1*s.adjustment.value+"px"),n.css({width:s.width.constraint+"px",height:s.height.constraint+"px"}),this.shouldAnimate()?n.tween({top:$.extend({},this.opts.responsive_transition_settings,{stop:s.position.top}),left:$.extend({},this.opts.responsive_transition_settings,{stop:s.position.left})}):n.css({top:s.position.top+"px",left:s.position.left+"px"});this.shouldAnimate()&&$.play();var p=this;setTimeout(function(){p.obj.removeClass("resizing")},0)},modalCallback:function(){this.opts.links&&this.opts.lightbox&&(!this.opts.is_mobile||this.opts.lightbox_mobile)&&this.prettyPhoto(t);var t=this.obj.children().get(0);$.isFunction(this.opts.modal_ready_callback)&&this.opts.modal_ready_callback.apply(this,[t,this])},prettyPhoto:function(t){var e=this,i=0;e.pp.IDs=[],e.pp.itemLoaded=!1,$.each(e.opts.gallery,function(t){e.pp.IDs.push(e.opts.gallery[t].id)}),$('a[rel^="'+e.opts.modal_name+'"]',t).prettyPhoto_gm({theme:e.opts.lightbox_theme,show_title:e.opts.lightbox_show_title,show_caption:e.opts.lightbox_show_caption,autoplay_slideshow:e.opts.lightbox_autoplay_slideshow,slideshow:e.opts.lightbox_slideshow,animation_speed:e.opts.lightbox_animation_speed,opacity:e.opts.lightbox_opacity/100,allow_resize:e.opts.lightbox_allow_resize,allow_expand:e.opts.lightbox_allow_expand,keyboard_shortcuts:e.opts.lightbox_keyboard_shortcuts,overlay_gallery:e.opts.lightbox_overlay_gallery,overlay_gallery_max:e.opts.lightbox_overlay_gallery_max,social_tools:function(i){var o=$('a[href="'+i+'"]',t).parent(".gmMosaicItem").attr("data-id"),s=e.gmedias[o],a=[];return e.opts.social_share_enabled&&a.push(e.socialShare(s)),e.opts.views_enabled&&a.push(e.viewsCounter(s)),e.opts.likes_enabled&&a.push(e.likesCounter(s)),e.opts.comments_enabled&&a.push(e.commentsCounter(s)),a.length?a:""},changepicturecallback:function(){var o=$("#pp_full_res").data().pp_src,s=$('a[href="'+o+'"]',t).parent(".gmMosaicItem").attr("data-id"),a=e.gmedias[s];if(e.opts.deep_links){var n="#!gallery-"+e.opts.ID+"-"+a.id,r=(""+window.location).split("#")[0]+n;window.history&&window.history.replaceState?window.history.replaceState({},document.title,r):location.replace(r)}clearTimeout(i),i=setTimeout(function(){e.viewLike(a)},1e3),e.pp.itemLoaded=!0},callback:function(){if(e.opts.deep_links){var t="#!",i=(""+window.location).split("#")[0]+t;window.history&&window.history.replaceState?window.history.replaceState({},document.title,i):location.replace(i)}e.pp.itemLoaded=!1}}),this.loadLightbox(),window.onhashchange=this.loadLightbox},socialShare:function(t){var e=this,i='<ul class="mosaic-share_sharelizers">    <li><a class="mosaic-share_facebook mosaic-share_sharelizer">Facebook</a></li>    <li><a class="mosaic-share_twitter mosaic-share_sharelizer">Twitter</a></li>    <li><a class="mosaic-share_pinterest mosaic-share_sharelizer">Pinterest</a></li>    <li><a class="mosaic-share_google mosaic-share_sharelizer">Google+</a></li>    <li><a class="mosaic-share_stumbleupon mosaic-share_sharelizer">StumbleUpon</a></li></ul>',i=$(i);return $(".mosaic-share_sharelizer",i).on("click",function(){var i,o=t.alt,s=t.src,a=window.location.href;if(!e.opts.deep_links){var n="#!gallery-"+e.opts.ID+"-"+t.id;a=(""+window.location).split("#")[0]+n}e.opts.share_post_link&&(a=t.post_link),$(this).hasClass("mosaic-share_twitter")&&(i="https://twitter.com/home?status="+encodeURIComponent(o+" "+a),window.open(i,"_blank")),$(this).hasClass("mosaic-share_facebook")&&(i="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a),window.open(i,"_blank")),$(this).hasClass("mosaic-share_pinterest")&&(i="https://pinterest.com/pin/create/button/?url="+encodeURIComponent(a)+"&media="+encodeURIComponent(s)+"&description="+encodeURIComponent(o),window.open(i,"_blank")),$(this).hasClass("mosaic-share_google")&&(i="https://plus.google.com/share?url="+encodeURIComponent(a),window.open(i,"_blank")),$(this).hasClass("mosaic-share_stumbleupon")&&(i="http://www.stumbleupon.com/submit?url="+encodeURIComponent(a)+"&title="+encodeURIComponent(o),window.open(i,"_blank"))}),i},likesCounter:function(t){var e=this,i="gmMosaic-button gmMosaic-likes";t.liked&&(i+=" gmMosaic-liked");var o='<div class="'+i+'">   <a><span class="gmMosaic-likes-count">'+t.likes+'</span>      <span class="gmMosaic-likes-icon">          <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="icon-heart" viewBox="0 0 1024 1024"><path class="path1" d="M755.188 64c-107.63 0-200.258 87.554-243.164 179-42.938-91.444-135.578-179-243.216-179-148.382 0-268.808 120.44-268.808 268.832 0 301.846 304.5 380.994 512.022 679.418 196.154-296.576 511.978-387.206 511.978-679.418 0-148.392-120.43-268.832-268.812-268.832z"></path></symbol></svg>          <svg class="gmMosaic-svgicon"><use xlink:href="#icon-heart"/></svg>      </span>   </a></div>',o=$(o);return o.on("click",function(){e.viewLike(t,!0),$(this).addClass("gmMosaic-liked"),$(".gmMosaic-likes-count",this).text(t.likes)}),o},viewsCounter:function(t){var e='<div class="gmMosaic-button gmMosaic-views">   <span><span class="gmMosaic-views-count">'+t.views+'</span>   <span class="gmMosaic-views-icon">      <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="icon-eye" viewBox="0 0 1024 1024"><path class="path1" d="M512 192c-223.318 0-416.882 130.042-512 320 95.118 189.958 288.682 320 512 320 223.312 0 416.876-130.042 512-320-95.116-189.958-288.688-320-512-320zM764.45 361.704c60.162 38.374 111.142 89.774 149.434 150.296-38.292 60.522-89.274 111.922-149.436 150.296-75.594 48.218-162.89 73.704-252.448 73.704-89.56 0-176.858-25.486-252.452-73.704-60.158-38.372-111.138-89.772-149.432-150.296 38.292-60.524 89.274-111.924 149.434-150.296 3.918-2.5 7.876-4.922 11.86-7.3-9.96 27.328-15.41 56.822-15.41 87.596 0 141.382 114.616 256 256 256 141.382 0 256-114.618 256-256 0-30.774-5.452-60.268-15.408-87.598 3.978 2.378 7.938 4.802 11.858 7.302v0zM512 416c0 53.020-42.98 96-96 96s-96-42.98-96-96 42.98-96 96-96 96 42.982 96 96z"></path></symbol></svg>      <svg class="gmMosaic-svgicon"><use xlink:href="#icon-eye"/></svg>   </span></span></div>';return e},viewLike:function(t,e){var i=this,o=t.id;i.Storage[o]||(i.Storage[o]={}),i.Storage[o].status&&(t.viewed=!0,"liked"==i.Storage[o].status&&(t.liked=!0)),t.viewed||(t.viewed=!0,t.views+=1,i.Storage[o].status="viewed",sessionStorage.setItem(i.elID,JSON.stringify(i.Storage)),GmediaGallery.ajaxurl&&$.ajax({type:"post",dataType:"json",url:GmediaGallery.ajaxurl,data:{action:"gmedia_module_interaction",hit:o}}).done(function(e){void 0!==e.views&&(t.views=e.views)})),e&&!t.liked&&(t.liked=!0,t.likes+=1,i.Storage[o].status="liked",sessionStorage.setItem(i.elID,JSON.stringify(i.Storage)),GmediaGallery.ajaxurl&&$.ajax({type:"post",dataType:"json",url:GmediaGallery.ajaxurl,data:{action:"gmedia_module_interaction",hit:o,vote:1}}).done(function(e){void 0!==e.likes&&(t.likes=e.likes)}))},commentsCounter:function(t){var e='<div class="gmMosaic-button gmMosaic-comments">   <a href="'+t.post_link+'#comments" target="_blank" title="Comments"><span class="gmMosaic-comments-count">'+t.cc+'</span>      <span class="gmMosaic-comments-icon">          <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><symbol id="icon-bubbles2" viewBox="0 0 1152 1024"><path class="path1" d="M480 0v0c265.096 0 480 173.914 480 388.448s-214.904 388.448-480 388.448c-25.458 0-50.446-1.62-74.834-4.71-103.106 102.694-222.172 121.108-341.166 123.814v-25.134c64.252-31.354 116-88.466 116-153.734 0-9.106-0.712-18.048-2.030-26.794-108.558-71.214-177.97-179.988-177.97-301.89 0-214.534 214.904-388.448 480-388.448zM996 870.686c0 55.942 36.314 104.898 92 131.772v21.542c-103.126-2.318-197.786-18.102-287.142-106.126-21.14 2.65-42.794 4.040-64.858 4.040-95.47 0-183.408-25.758-253.614-69.040 144.674-0.506 281.26-46.854 384.834-130.672 52.208-42.252 93.394-91.826 122.414-147.348 30.766-58.866 46.366-121.582 46.366-186.406 0-10.448-0.45-20.836-1.258-31.168 72.57 59.934 117.258 141.622 117.258 231.676 0 104.488-60.158 197.722-154.24 258.764-1.142 7.496-1.76 15.16-1.76 22.966z"></path></symbol></svg>          <svg class="gmMosaic-svgicon"><use xlink:href="#icon-bubbles2"/></svg>      </span>   </a></div>';return e},loadLightbox:function(){var t=this,e="#!gallery-",i=location.hash;0===i.indexOf(e)&&(i=i.substr(e.length).split("-"),i[0]&&parseInt(i[0])==t.opts.ID&&(i[1]?(startWith=t.pp.IDs.indexOf(i[1]),-1!==startWith&&(t.pp.itemLoaded?(startWith=$.prettyPhoto_gm.pp_ids.indexOf(i[1]),-1!==startWith&&$.prettyPhoto_gm.changePage(startWith)):setTimeout(function(){$("div[data-id="+i[1]+"]",t.obj).find('a[rel^="'+t.opts.modal_name+'"]').trigger("click")},50))):$(window).scrollTop(t.obj.scrollTop())))},makeID:function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"gmg_"+(t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t())},logGalleryData:function(){for(var t=[],e=0;e<this.opts.gallery.length;e++)t.push({src:this.opts.gallery[e].src,thumb:this.opts.gallery[e].thumb,caption:this.opts.gallery[e].caption,width:this.opts.gallery[e].width.original,height:this.opts.gallery[e].height.original});this.log.info("Generate Gallery Data..."),this.log.print(JSON.stringify(t))},shouldAnimate:function(){return this.opts.responsive_transition},_isLinkModal:function(t){var e=t.split("?")[0];return e.match(/\.(gif|jpg|jpeg|tiff|png)$/i)||t.match(/\bimage=true\b/i)||t.match(/youtube\.com\/(watch|embed)/i)||t.match(/youtu\.be/i)||t.match(/vimeo\.com/i)||t.match(/\b.mov\b/i)||t.match(/\b.swf\b/i)||t.match(/\bajax=true\b/i)||t.match(/\bcustom=true\b/i)||"#"==t.substr(0,1)||t.match(/\biframe=true\b/i)?!0:!1},__:function(){return this.version}}),$.fn[e]=function(t){return t=t||{},this.each(function(){if(!$.data(this,e)){var o=new i(this,t);$.data(this,e,o),window.gmediaMosaic.mosaics.push({el:this,opts:t,instance:o})}})}}(jQuery),/** @preserve
 *  Class: prettyPhoto_gm
 *  Use: Lightbox clone for jQuery
 *  Author: Stephane Caron (http://www.no-margin-for-errors.com)
 *  Version: 3.1.6 mod
 */
function($){function t(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",o=RegExp(i),s=o.exec(e);return null==s?"":s[1]}$.prettyPhoto_gm={version:"3.1.6",current_index:0,pp_ids:[]},$.fn.prettyPhoto_gm=function(e){function i(){$(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(k/2-u.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:u.contentHeight,width:u.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:x/2-u.containerWidth/2<0?0:x/2-u.containerWidth/2,width:u.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find("#fullResImage").height(u.height).width(u.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==r(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(u.resized?$("a.pp_expand,a.pp_contract").show():$("a.pp_expand").hide()),!settings.autoplay_slideshow||y||m||$.prettyPhoto_gm.startSlideshow(),settings.changepicturecallback(),m=!0}),d(),e.ajaxcallback()}function o(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){$(".pp_loaderIcon").show(),t()})}function s(t){t>1?$(".pp_nav").show():$(".pp_nav").hide()}function a(t,e){if(resized=!1,n(t,e),imageWidth=t,imageHeight=e,(v>x||_>k)&&doresize&&settings.allow_resize&&!b){for(resized=!0,fitting=!1;!fitting;)v>x-50?(imageWidth=x-50,imageHeight=e/t*imageWidth):_>k-120?(imageHeight=k-120,imageWidth=t/e*imageHeight):fitting=!0,_=imageHeight,v=imageWidth;(v>x||_>k)&&a(v,_),n(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(_),containerWidth:Math.floor(v),contentHeight:Math.floor(g),contentWidth:Math.floor(f),resized:resized}}function n(t,e){t=parseFloat(t),e=parseFloat(e),240>t&&(t=240),k=$(window).height(),x=$(window).width(),$pp_details=$pp_pic_holder.find(".pp_details"),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo($("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo($("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),g=e+detailsHeight,f=t,_=g+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),v=t+parseFloat($pp_pic_holder.find(".pp_content_container .pp_left").css("paddingLeft"))+parseFloat($pp_pic_holder.find(".pp_content_container .pp_right").css("paddingRight"))}function r(t){return t.match(/youtube\.com\/watch/i)||t.match(/youtu\.be/i)?"youtube":t.match(/vimeo\.com/i)?"vimeo":t.match(/\b.mov\b/i)?"quicktime":t.match(/\b.swf\b/i)?"flash":t.match(/\biframe=true\b/i)?"iframe":t.match(/\bajax=true\b/i)?"ajax":t.match(/\bcustom=true\b/i)?"custom":"#"==t.substr(0,1)?"inline":"image"}function l(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=p(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=k/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>k)return;$pp_pic_holder.css({top:projectedTop,left:x/2+scroll_pos.scrollLeft-contentwidth/2})}}function p(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function h(){k=$(window).height(),x=$(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height($(document).height()).width(x)}function d(){isSet&&settings.overlay_gallery&&"image"==r(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((u.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,$.prettyPhoto_gm.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function c(){var t="";if("string"==typeof settings.social_tools?(t=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),settings.markup=settings.markup.replace("{pp_social}",t)):settings.markup=settings.markup.replace("{pp_social}",""),$("body").append(settings.markup),$pp_pic_holder=$(".pp_pic_holder"),$ppt=$(".ppt"),$pp_overlay=$("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var e=0;e<pp_images.length;e++)pp_images[e].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[e]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=$(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return $.prettyPhoto_gm.changeGalleryPage("next"),$.prettyPhoto_gm.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return $.prettyPhoto_gm.changeGalleryPage("previous"),$.prettyPhoto_gm.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(t){$(this).find("a").click(function(){return $.prettyPhoto_gm.changePage(t),$.prettyPhoto_gm.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return $.prettyPhoto_gm.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:$(document).height(),width:$(window).width()}).bind("click",function(){settings.modal||$.prettyPhoto_gm.close()}),$("a.pp_close").bind("click",function(){return $.prettyPhoto_gm.close(),!1}),settings.allow_expand&&$("a.pp_expand").bind("click",function(){return $(this).hasClass("pp_expand")?($(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):($(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),o(function(){$.prettyPhoto_gm.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return $.prettyPhoto_gm.changePage("previous"),$.prettyPhoto_gm.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return $.prettyPhoto_gm.changePage("next"),$.prettyPhoto_gm.stopSlideshow(),!1}),l()}e=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,show_caption:!0,allow_resize:!0,allow_expand:!0,default_width:800,default_height:600,counter_separator_label:"/",theme:"pp_default",hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,overlay_gallery:!1,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"><div class="ppt">&nbsp;</div>    <div class="pp_top"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div>    <div class="pp_content_container">        <div class="pp_left"><div class="pp_right"><div class="pp_content">            <div class="pp_loaderIcon"></div>            <div class="pp_fade">                <div class="pp_full_res_holder">                    <a href="#" class="pp_expand" title="Expand the image">Expand</a>                    <div class="pp_hoverContainer"><a class="pp_next" href="#">next</a><a class="pp_previous" href="#">previous</a></div>                    <div id="pp_full_res"></div>                </div>                <div class="pp_details">                    <div class="pp_nav"><a href="#" class="pp_arrow_previous">Previous</a><p class="currentTextHolder">0/0</p><a href="#" class="pp_arrow_next">Next</a></div>                    <div class="pp_social">{pp_social}</div>                    <a class="pp_close" href="#">Close</a>                    <div class="pp_caption"></div>                </div>            </div>        </div></div></div>    </div>    <div class="pp_bottom"><div class="pp_left"></div><div class="pp_middle"></div><div class="pp_right"></div></div></div><div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"><a href="#" class="pp_arrow_previous">Previous</a><div><ul>{gallery}</ul></div><a href="#" class="pp_arrow_next">Next</a></div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:""},e);var u,m,g,f,_,v,y,w=this,b=!1,k=$(window).height(),x=$(window).width();return doresize=!0,scroll_pos=p(),$(window).unbind("resize.prettyphoto_gm").bind("resize.prettyphoto_gm",function(){l(),h()}),e.keyboard_shortcuts&&$(document).unbind("keydown.prettyphoto_gm").bind("keydown.prettyphoto_gm",function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:$.prettyPhoto_gm.changePage("previous"),t.preventDefault();break;case 39:$.prettyPhoto_gm.changePage("next"),t.preventDefault();break;case 27:settings.modal||$.prettyPhoto_gm.close(),t.preventDefault()}}),$.prettyPhoto_gm.initialize=function(){return settings=e,theRel=$(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(w,function(t){return-1!=$(t).attr(settings.hook).indexOf(theRel)?$(t).attr("href"):void 0}):$.makeArray($(this).attr("href")),pp_titles=[],pp_descriptions=[],isSet?jQuery.map(w,function(t){var e=$(t).find("img").data("gmedia");pp_titles.push(e.alt),pp_descriptions.push(e.caption),$.prettyPhoto_gm.pp_ids.push(e.id)}):(pp_titles=$.makeArray($(this).find("img").data("gmedia").alt),pp_descriptions=$.makeArray($(this).find("img").data("gmedia").caption),$.prettyPhoto_gm.pp_ids=$.makeArray($(this).find("img").data("gmedia").id)),settings.show_caption||(pp_descriptions=[]),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray($(this).attr("href"),pp_images),rel_index=isSet?set_position:$("a["+settings.hook+"^='"+theRel+"']").index($(this)),$.prettyPhoto_gm.current_index=rel_index,c(this),settings.allow_resize&&$(window).bind("scroll.prettyphoto_gm",function(){l()}),$.prettyPhoto_gm.open(),!1},$.prettyPhoto_gm.open=function(o){return"undefined"==typeof settings&&(settings=e,pp_images=$.makeArray(arguments[0]),pp_titles=arguments[1]?$.makeArray(arguments[1]):$.makeArray(""),pp_descriptions=arguments[2]?$.makeArray(arguments[2]):$.makeArray(""),isSet=pp_images.length>1?!0:!1,set_position=arguments[3]?arguments[3]:0,c(o.target)),settings.hideflash&&$("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),s($(pp_images).size()),$(".pp_loaderIcon").show(),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+$(pp_images).size()),void 0!==pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_caption").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_caption").hide(),"function"==typeof settings.social_tools&&(pp_social=settings.social_tools(pp_images[set_position]),$pp_pic_holder.find(".pp_social").empty().append(pp_social)),movie_width=parseFloat(t("width",pp_images[set_position]))?t("width",pp_images[set_position]):""+settings.default_width,movie_height=parseFloat(t("height",pp_images[set_position]))?t("height",pp_images[set_position]):""+settings.default_height,b=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat($(window).height()*parseFloat(movie_height)/100-150),b=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat($(window).width()*parseFloat(movie_width)/100-150),b=!0),$pp_pic_holder.fadeIn(function(){switch(settings.show_title&&""!=pp_titles[set_position]&&void 0!==pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1,r(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<$(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){u=a(imgPreloader.width,imgPreloader.height),i()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),$.prettyPhoto_gm.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":u=a(movie_width,movie_height),movie_id=t("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,t("rel",pp_images[set_position])?movie+="?rel="+t("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":u=a(movie_width,movie_height),movie_id=pp_images[set_position];var e=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,o=movie_id.match(e);movie="http://player.vimeo.com/video/"+o[3]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=u.width+"/embed/?moog_width="+u.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,u.height).replace(/{path}/g,movie);break;case"quicktime":u=a(movie_width,movie_height),u.height+=15,u.contentHeight+=15,u.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":u=a(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":u=a(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,u.width).replace(/{height}/g,u.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,u=a(movie_width,movie_height),doresize=!0,skipInjection=!0,$.get(pp_images[set_position],function(t){toInject=settings.inline_markup.replace(/{content}/g,t),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,i()});break;case"custom":u=a(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=$(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo($("body")).show(),doresize=!1,u=a($(myClone).width(),$(myClone).height()),doresize=!0,$(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html())}$pp_pic_holder.find("#pp_full_res").data({pp_src:pp_images[set_position],pp_position:set_position}),imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,i())}),!1},$.prettyPhoto_gm.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=$(pp_images).size()-1)):"next"==t?(set_position++,set_position>$(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,$.prettyPhoto_gm.current_index=rel_index,doresize||(doresize=!0),settings.allow_expand&&$(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),o(function(){$.prettyPhoto_gm.open()})},$.prettyPhoto_gm.changeGalleryPage=function(t){"next"==t?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==t?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=t,slide_speed="next"==t||"previous"==t?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},$.prettyPhoto_gm.startSlideshow=function(){void 0===y?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return $.prettyPhoto_gm.stopSlideshow(),!1}),y=setInterval($.prettyPhoto_gm.startSlideshow,settings.slideshow)):$.prettyPhoto_gm.changePage("next")},$.prettyPhoto_gm.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return $.prettyPhoto_gm.startSlideshow(),!1}),clearInterval(y),y=void 0},$.prettyPhoto_gm.close=function(){$pp_overlay.is(":animated")||($.prettyPhoto_gm.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),$("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){$(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&$("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),$(this).remove(),$(window).unbind("scroll.prettyphoto_gm"),settings.callback(),doresize=!0,m=!1,delete settings}))},this.unbind("click.prettyphoto_gm").bind("click.prettyphoto_gm",$.prettyPhoto_gm.initialize)}}(jQuery);var ppgm_alreadyInitialized=!1;